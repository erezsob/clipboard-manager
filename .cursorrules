# Cursor IDE Rules for Clipboard Manager

## Project Context
This is a personal-use macOS clipboard manager built with Electron, React, TypeScript, and SQLite. The application provides background clipboard monitoring, local SQLite storage, and a system tray interface.

## Code Style & Standards
- Follow the code quality standards in `.docs/CODE_STANDARDS.md`
- Use TypeScript with strict mode
- Prefer functional components and hooks
- Extract constants to `src/lib/constants.ts`
- Keep components under 300 lines when possible
- Refrain from using React's useEffect as much as possible
- Prefer handling effects on user interaction rather than relying on local state
- Prioritize semantic HTML and accessible UI
- When a function has more than 2 arguments, prefer passing an object

## Architecture Patterns
- See `.docs/ARCHITECTURE.md` for system architecture details
- Database operations go through `src/lib/db.ts`
- IPC communication via `electron/preload.ts` and `electron/main.ts`
- Electron main process: `electron/main.ts`
- React frontend: `src/App.tsx` and components
- Preload script must be compiled to CommonJS (see `electron/tsconfig.preload.json`)

## File Organization
- React components: `src/` directory
- Custom hooks: `src/hooks/`
- Utility functions: `src/lib/`
- Electron main process: `electron/`
- Database migrations: `electron/migrations/`
- Documentation: `.docs/` directory

## When Making Changes
1. Review `.docs/AGENT_WORKFLOW.md` for recommended interaction patterns
2. Check `.docs/CURRENT_STATE.md` for what's already implemented
3. Follow patterns in existing code and the code standards in `.docs/CODE_STANDARDS.md`
4. Update relevant documentation files in `.docs/` when work is complete
5. Run `pnpm types:check` and `pnpm lint` before committing
6. Ensure pre-push git hook passes (formatting, linting, types, knip)
7. Add tests for new functionality and refactors
8. Run `pnpm test` and `pnpm test:coverage` to ensure all tests pass and coverage is at 100%
9. Update the current state in `.docs/CURRENT_STATE.md` to reflect the changes
10. Update the features roadmap in `.docs/FEATURES.md` to reflect the changes
11. Update the database schema in `.docs/DATABASE.md` to reflect the changes
12. Update the development process in `.docs/WORKFLOW.md` to reflect the changes
13. Update the architecture in `.docs/ARCHITECTURE.md` to reflect the changes

## Tech Stack
- Frontend: React 19 + TypeScript + Tailwind CSS v4
- Backend: Electron (Node.js + TypeScript)
- Database: SQLite (via `better-sqlite3`)
- Build Tool: Vite
- Linting/Formatting: Biome
- Package Manager: pnpm

